{{ block title }}
    Game 1 Rules
{{ endblock }}
{{ block content }}
    <style>
    .form-inline {
      display: flex;
      flex-flow: row wrap;
      align-items: center;
    }
    </style>

    <p> You will have 30 seconds to make a decision on your turn, with a timer appearing in the upper
    right corner of the display. You must select an option in this time frame. The other participant
    will also have 30 seconds to make their decision. Regardless of how long they take to select their
    choice, the computer will wait the full 30 seconds before either continuing to your turn or ending
    the game.</p>

    <p> The experiment will proceed once everyone has completed the quiz questions. </p>

    <div id='questions'> </div>

    <div id='q1'>
        <p> 1. There are 2 choices on each turn </p>
        <input type="radio" id="q1_true" name="q1" value="True">
        <label for="q1_true">True</label><br>
        <input type="radio" id="q1_false" name="q1" value="False">
        <label for="q1_false">False</label><br><br>
    </div>

    <div id='q1_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q1_error' style='display: none'>
        <p style='color: red;'>Incorrect, you will be paired with a different person for each of the 3 rounds of this game. Try again.</p>
    </div>


    <div id='q2' style='display: none'>
        <p> 2. Participants are randomly paired to each other</p>
        <input type="radio" id="q2_true" name="q2" value="True">
        <label for="q2_true">True</label><br>
        <input type="radio" id="q2_false" name="q2" value="False">
        <label for="q2_false">False</label><br><br>
    </div>

    <div id='q2_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q2_error' style='display: none'>
        <p style='color: red;'>Incorrect, you will indeed be randomly assigned to a new person each of the 3 rounds. Try again. </p>
    </div>


    <div id='q3' style='display: none'>
        <p> 3. BLUE goes first</p>
        <input type="radio" id="q3_true" name="q3" value="True">
        <label for="q2_true">True</label><br>
        <input type="radio" id="q3_false" name="q3" value="False">
        <label for="q2_false">False</label><br><br>
    </div>

    <div id='q3_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q3_error' style='display: none'>
        <p style='color: red;'>Incorrect, you will only receive payment for 1 of the 3 games, randomly chosen at the end of the experiment. Try again. </p>
    </div>


    <div id='q4' class='form-inline' style='display: none'>
        <label for="q4_ans">4. If RED selects CONTINUE and then BLUE selects END, BLUE will receive </label>
        <input style="width:10%;" type="text" id="q4_ans"/>
        <inline> LD</inline>
    </div>

    <div id='q4_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q4_error' style='display: none'>
        <p style='color: red;'>Incorrect. Try again. </p>
    </div>


    <div id='q5' class='form-inline' style='display: none'>
        <label for="q5a_ans">5. If both players select CONTINUE until turn 3, when RED selects STOP, RED will
        receive </label>
        <input style="width:10%;" type="text" id="q5a_ans"/>
        <inline> LD and BLUE will receive </inline>
        <input style="width:10%;" type="text" id="q5b_ans"/>
        <inline> LD </inline>
    </div>

    <div id='q5_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q5_error' style='display: none'>
        <p style='color: red;'>Incorrect. Try again. </p>
    </div>


    <div id='q6' style='display: none'>
        <p> 6. The game will end after the 6th round regardless of what BLUE chooses </p>
        <input type="radio" id="q6_true" name="q6" value="True">
        <label for="q6_true">True</label><br>
        <input type="radio" id="q6_false" name="q6" value="False">
        <label for="q6_false">False</label><br><br>
    </div>

    <div id='q6_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q6_error' style='display: none'>
        <p style='color: red;'>Incorrect, one of the 3 games will indeed be chosen at random for your payment. Try again. </p>
    </div>


    <div id='q7' class='form-inline' style='display: none'>
        <label for="q5a_ans">7. If both players select CONTINUE until turn 6, BLUE is faced with a choice of receiving </label>
        <input style="width:10%;" type="text" id="q7a_ans"/>
        <inline> LD for selecting STOP and </inline>
        <input style="width:10%;" type="text" id="q7b_ans"/>
        <inline> LD for selecting CONTINUE</inline>
    </div>

    <div id='q7_correct' style='display: none'>
        <p style='color: green;'>Correct </p>
    </div>

    <div id='q7_error' style='display: none'>
        <p style='color: red;'>Incorrect, one of the 3 games will indeed be chosen at random for your payment. Try again. </p>
    </div>

    <br>
    <button class = 'otree-btn-next btn btn-primary' id='check' type='button' onclick='update()'>
        Check
    </button>

    <input type='hidden' name='part1_intro_q1' id='part1_intro_q1' />
    <input type='hidden' name='part1_intro_q2' id='part1_intro_q2' />
    <input type='hidden' name='part1_intro_q3' id='part1_intro_q3' />
    <input type='hidden' name='part1_intro_q4' id='part1_intro_q4' />
    <input type='hidden' name='part1_intro_q4' id='part1_intro_q5' />
    <input type='hidden' name='part1_intro_q4' id='part1_intro_q6' />
    <input type='hidden' name='part1_intro_q4' id='part1_intro_q7' />

    <button class = 'otree-btn-next btn btn-primary' id='next' style='visibility: visible'>
        Next
    </button>

    <script>
        let state = 1;
        document.getElementById('part1_intro_q1').value = 'False';
        document.getElementById('part1_intro_q2').value = 'False';
        document.getElementById('part1_intro_q3').value = 'False';
        document.getElementById('part1_intro_q4').value = 'False';
        document.getElementById('part1_intro_q5').value = 'False';
        document.getElementById('part1_intro_q6').value = 'False';
        document.getElementById('part1_intro_q7').value = 'False';
        function update() {
            switch(state) {
              case 1:
                if (document.getElementById('q1_true').checked) {
                    state = 2;
                    document.getElementById('q1_correct').style.display = 'block'
                    document.getElementById('q2').style.display = 'block'
                    document.getElementById('q1_error').style.display = 'none'
                }
                else {
                    document.getElementById('q1_error').style.display = 'block'
                    document.getElementById('part1_intro_q1').value = 'True';
                }
                break;

              case 2:
                document.getElementById('q1_correct').style.display = 'none'
                if (document.getElementById('q2_true').checked) {
                    state = 3;
                    document.getElementById('q2_correct').style.display = 'block'
                    document.getElementById('q3').style.display = 'block'
                    document.getElementById('q2_error').style.display = 'none'
                }
                else {
                    document.getElementById('q2_error').style.display = 'block'
                    document.getElementById('part1_intro_q2').value = 'True';
                }
                break;

              case 3:
                document.getElementById('q2_correct').style.display = 'none'
                if (document.getElementById('q3_false').checked) {
                    state = 4;
                    document.getElementById('q3_correct').style.display = 'block'
                    document.getElementById('q4').style.display = 'block'
                    document.getElementById('q3_error').style.display = 'none'
                }
                else {
                    document.getElementById('q3_error').style.display = 'block'
                    document.getElementById('part1_intro_q3').value = 'True';
                }
                break;

              case 4:
                document.getElementById('q3_correct').style.display = 'none'
                if (document.getElementById('q4_ans').value == "20") {
                    <!-- TODO: make dynamic based on which version -->
                    state = 5;
                    document.getElementById('q4_correct').style.display = 'block'
                    document.getElementById('q5').style.display = 'block'
                    document.getElementById('q4_error').style.display = 'none'
                }
                else {
                    document.getElementById('q4_error').style.display = 'block'
                    document.getElementById('part1_intro_q4').value = 'True';
                }
                break;

              case 5:
                document.getElementById('q4_correct').style.display = 'none'
                if (document.getElementById('q5a_ans').value == "160" && document.getElementById('q5b_ans').value == "40") {
                    state = 6;
                    document.getElementById('q5_correct').style.display = 'block'
                    document.getElementById('q6').style.display = 'block'
                    document.getElementById('q5_error').style.display = 'none'
                }
                else {
                    document.getElementById('q5_error').style.display = 'block'
                    document.getElementById('part1_intro_q5').value = 'True';
                }
                break;

              case 6:
                document.getElementById('q5_correct').style.display = 'none'
                if (document.getElementById('q6_true').checked) {
                    state = 7;
                    document.getElementById('q6_correct').style.display = 'block'
                    document.getElementById('q7').style.display = 'block'
                    document.getElementById('q6_error').style.display = 'none'
                }
                else {
                    document.getElementById('q6_error').style.display = 'block'
                    document.getElementById('part1_intro_q6').value = 'True';
                }
                break;

              case 7:
                document.getElementById('q5_correct').style.display = 'none'
                if (document.getElementById('q7a_ans').value == "1280" && document.getElementById('q7b_ans').value == "640") {
                    state = 8;
                    document.getElementById('q7_correct').style.display = 'block'
                    document.getElementById('next').style.visibility = 'visible'
                    document.getElementById('q7_error').style.display = 'none'
                    document.getElementById('check').style.display = 'none'
                }
                else {
                    document.getElementById('q7_error').style.display = 'block'
                    document.getElementById('part1_intro_q7').value = 'True';
                }
                break;

              default:
                break;
            }
        }
        $(document).keypress(
          function(event){
            if (event.which == '13') {
              event.preventDefault();
              update();
            }
        });
    </script>


{{ endblock }}

